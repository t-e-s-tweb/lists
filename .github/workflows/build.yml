name: Build and Release

on:
  workflow_dispatch:
jobs:
  ubuntu-build:
    runs-on: ubuntu-latest
    container: docker.io/ubuntu:18.04
    steps:
      - name: Get project dependencies
        run: |
          apt update
          apt install -y ca-certificates git curl gawk awk

      - name: get code
        run: |
          git clone https://github.com/t-e-s-tweb/lists
          cp -r lists/* ./
          rm -rf lists


      - name: build
        run: |
          chmod +x lists.sh
          ./lists.sh
         
      - name: Upload binaries to release
        uses: svenstaro/upload-release-action@v2
        with:
          repo_token: ${{ secrets.PAT }}
          file: ./*.*
          tag: ${{ github.ref }}
          overwrite: true
          file_glob: true
